# Спецификация сообщений #

## XML Schema ##

Диаграмма:

![http://words-battle.googlecode.com/svn/wiki/images/MessageSchema2.png](http://words-battle.googlecode.com/svn/wiki/images/MessageSchema2.png)

Верхний тэг data - для сообщений от клиента серверу.
Нижний - от сервера клиенту.

## Типы сообщений, которые нам потребуются ##

### Организационные ###

**Игрок отправляет серверу:**
  * Регистрация и начало игры:
    * register\_player\_name (Игрок посылает запрос на регистрацию имени playerName)
    * request\_game (Игрок отправляет запрос на игру другому пользователю с именем playerName)
    * _random\_game\_request_ (Играть со случайным противником. Добавим в будущем.)
  * В ответ на game\_request:
    * accept\_game\_request (Игрок принимает запрос от игрока по имени playerName)
    * deny\_game\_request (Игрок отклоняет запрос от игрока по имени playerName)
  * Во время игры:
    * pick\_letter (Игрок взял букву. Буква должна перенестись к нему в слово, исчезнув из общего пула.)
    * update\_word (Игрок переставил буквы в слове или выкинул одну. Отправляется при этом все слово.)
    * submit\_word (Игрок отправляет слово на проверку)
    * pause\_game
    * resume\_game

**Сервер клиенту:**
  * Ответ на register\_player\_name:
    * name\_registered (Сервер успешно зарегистрировал пользователя)
    * name\_conflict (Пользователь с таким именем уже существует!)
    * multiple\_names\_for\_one\_user\_conflict (Пользователь пытается повторно зарегистрироваться)
  * Сервер оповещает игрока о запросах на игру:
    * game\_request (Сервер: другой игрок хочет с вами поиграть)
    * game\_request\_accepted (Сервер: противник согласился принять ваш запрос)
    * game\_request\_denied (Сервер: противник отказался принять ваш запрос)

### Игровые ###
**Сервер отправляет обоим игрокам:**
  * game\_started
  * game\_paused
  * game\_resumed
  * game\_ended
  * update (сервер присылает состояние общего пула букв, слова обоих игроков, очки каждого игрока)