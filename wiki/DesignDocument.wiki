#summary Design Document
#labels Featured,Phase-Design,Phase-Implementation

= Words Battle game =
Цель игроков - на скорость составлять из имеющихся общих букв слова; чем слова сложнее и быстрее составлены, тем больше дается очков. Набор слов из букв происходит интерактивно: если один игрок использовал букву, то она уже не доступна другому. Игра заканчивается, когда один из игроков набирает достаточно очков (или на определенное количество больше, чем его противник).


== Game Play ==
 # Сервер присылает пул букв, который одинково отображается у обоих игроков. Каждой букве соответствет количество очков: чем реже она встречается в языке, тем больше за нее дается очков.
 # Игрок нажимает на букву, и он отправляется в конец его слова. (См. [Game_modes])
  Note: если раньше противник выбрал эту же букву, сервер мог не успеть сообщить об этом первому игроку. Поэтому в момент выбора буквы _на клиенте_ она не сразу переносится в слово, а ждет разрешения от сервера.<br><br>(Решили избавиться в данном случае от воможности перетаскивать букву в слово пальцем, потому что получается неприятный User experience из-за задержки соединения с сервером: буква будет либо оставаться в пуле и не следовать за пальцем сразу же, либо потом улетать из своего слова в слово противника.)<br><br>Если сервер сообщает, что букву взял другой игрок, она отправляется в его слово. Это позволит было оценивать действия противника; можно попробовать помешать ему, забрав себе или выкинув из пула буквы, которые явно понадобятся ему для составления слова.
 # Буквы в слове можно поменять местами перетаскиванием либо удалить совсем.
 # Когда слово составлено, игрок нажимает кнопку "Отправить" (или делает соответствующий жест - для скорости), и слово отправляется на сервер.
  Note: пока сервер не ответит, слово остается на экране, т. к. оно может не пройти проверку по словарю. Тогда надо об этом сигнализировать игроку (подсветить слово красным и т. п.)
 # Если слово защитывается, оно должно уйти с экрана, и одновременно к счет игрока добавляются очки за слово. Очки считаются по сумме очков за использованные буквы.

==== Добавить в будущем ====
 * Возможность выкидывать буквы "со стола"(из пула), чтобы они не достались противнику или если все буквы не подходят.

=== Game modes ===
_Первым реализуем интерактивный режим_

  # *Пошаговый.* Игрокам дается фиксированый пул букв: по мере использования букв из пула, пул не пополняется новыми буквами. Из слова букву можно только _вернуть обратно_ в пул. Игра разбита на шаги. Когда оба игрока набрали слово, шаг заканчивается.
  # *Интерактивный.* Игрокам дается пул, который пополняется буквами в процессе игры (через некоторое время после использования буквы на ее месте появляется новая). Игрок может _удалить_ букву из слова, но не вернуть ее в пул. Игроки как можно быстрее набирают слова и отправляют их.


== Графика ==
 * Сверху и снизу место для слов: снизу слово играющего, сверху слово противника. Посередине на фоне зеленого сукна разбросанные буквы.
 * Очки лучше всего как-то визуализировать. Как уменьшающиеся жизни или как наооборот растущие колонки.
 * Можно игроку показывать commit'нутые его противником слова.
 * Буквы круглые, на каждой букве должны отображаться ее очки, например, так:
  http://words-battle.googlecode.com/svn/wiki/images/letters.png


== Вопросы реализации ==
  * Так как получилось много функционала на сервере, решено сделать логику игры на сервере. Это проверка слова, генерация выпадающих букв и синхронизация действий игроков.
  * Взаимодействие с сервром решено сдлеать с помощью JSON строк. Спецификация сообщений вынесена в отдельный документ MessageSpecification.